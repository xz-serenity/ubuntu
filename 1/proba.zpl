#problem
#probabilistic constrained fixed charge transportation problem
#       min sum_{i=1}^n sum_{j=1}^d (c_ij w_ij + f_ij y_ij)
#s.t.   sum_{i=1}^d w_ij \leq b_ij  \forall i \in [n]
#       sum_{i=1}^n w_ij = x_ij  \forall j \in [d]
#       0 \leq w_ij \leq b_i y_ij  \forall i \in [i], j \in [d]
#       y_ij \in {0,1}  \forall i \in [n], j \in [d]
#       P(x \geq \xi) \geq 1 - \xi.


set N := {1 .. 40};
set D := {1 .. 10};
set DN:= D * N;

param c[DN] := 
     |1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40|
   |1|73,15,54,40,6,100,16,73,33,51,9,16,43,51,1,80,3,81,44,11,26,32,98,35,75,66,71,19,89,59,66,81,90,96,24,3,84,75,7,35|
   |2| 41,35,62,95,73,29,14,27,60,24,94,59,100,30,92,15,46,88,7,3,54,47,37,55,18,4,22,72,38,9,54,9,88,1,23,90,90,95,6,97|
   |3|15,76,79,74,26,98,5,78,13,84,4,50,44,44,35,92,52,21,52,28,33,69,32,65,91,76,99,0,16,78,26,80,56,94,36,79,55,59,73,48|
   |4|29,7,53,18,12,58,8,35,46,70,28,5,91,2,53,92,55,64,11,76,36,18,98,74,7,51,36,3,17,48,69,83,41,92,22,80,1,44,1,27|
   |5|21,7,98,37,0,32,74,18,57,0,30,95,39,44,3,56,29,77,2,43,12,28,36,7,92,11,31,1,43,39,59,37,49,53,84,30,17,12,97,33|
   |6|24,93,79,81,85,65,89,32,15,95,88,66,96,79,55,47,86,35,77,40,44,0,69,62,4,90,9,75,62,51,18,11,73,90,63,95,64,1,99,73|
   |7|69,4,6,0,55,70,23,36,65,84,15,53,62,3,33,12,78,46,47,8,86,72,79,27,9,56,16,10,70,21,82,63,3,59,90,55,54,60,51,80|
   |8|74,34,29,86,26,82,56,18,19,58,51,54,62,28,18,17,77,19,61,64,4,59,9,73,99,86,59,66,81,71,72,66,54,19,43,79,18,56,27,45|
   |9|17,19,79,22,0,98,57,95,95,88,53,35,57,15,65,95,56,61,62,29,73,99,46,41,7,72,55,28,1,4,43,65,83,27,91,82,18,80,63,50|
  |10|34,77,2,90,92,11,6,68,27,71,91,27,33,15,89,37,35,57,75,65,49,12,66,29,63,91,72,92,84,66,26,71,24,54,21,19,71,67,37,47|;
# numpy.random.uniform(1,100,int)  ;
#param w[ND] := 0 ;
param f[DN] := 0 ; 
#    |1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40|
#  |1|71,40,9,52,31,96,12,15,75,95,45,69,94,28,45,82,17,41,74,80,69,14,65,5,42,88,12,14,43,55,59,68,100,40,39,45,63,75,3,34|
#  |2|81,23,85,53,87,29,37,38,43,91,32,9,19,81,15,9,20,39,20,20,47,56,88,5,46,8,49,36,60,14,2,41,59,0,90,23,23,5,91,25|
#  |3|18,31,59,58,2,26,37,34,69,24,41,19,87,33,48,70,93,37,58,98,14,62,54,20,73,34,42,0,24,64,49,26,65,65,24,75,77,72,84,74|
#  |4|79,53,85,12,9,19,7,56,86,6,57,20,42,92,56,22,48,15,41,57,100,18,4,60,86,29,68,87,94,38,88,91,46,87,75,31,98,41,85,97|
#  |5|29,20,84,70,42,69,84,9,91,34,47,49,3,81,11,31,47,81,1,28,18,12,16,77,60,16,21,71,81,41,100,47,50,33,54,20,30,20,72,52|
#  |6|68,93,67,89,81,70,95,43,24,47,9,41,5,74,10,38,32,91,78,92,64,67,43,31,100,80,45,36,56,31,84,51,29,88,28,62,42,15,2,9|
#  |7|24,17,92,46,96,85,69,42,46,20,2,93,44,90,2,6,71,61,40,22,98,87,65,65,42,76,68,75,68,26,43,99,20,56,40,95,40,98,54,70|
#  |8|42,7,91,69,28,40,20,4,9,91,65,98,80,27,24,96,57,38,0,88,76,69,25,30,82,94,44,53,42,59,46,56,100,16,96,93,43,89,78,93|
#  |9|19,63,5,38,26,39,69,38,56,54,8,23,67,72,32,10,91,56,75,14,0,77,19,65,49,57,25,14,41,40,98,27,53,50,78,66,85,4,46,22|
# |10|41,5,75,11,0,32,16,75,9,80,76,28,49,95,53,13,97,26,56,27,96,47,10,44,26,38,70,59,27,29,4,36,39,17,8,87,28,65,44,60|;

param b[N]  := <1> 91,<2> 26,<3> 46,<4> 95,<5> 22,<6> 87,<7> 45,<8> 51,<9> 85,<10> 80,<11> 25,<12> 10,<13> 27,<14> 85,<15> 8,<16> 21,<17> 69,<18> 1,<19> 16,<20> 84,<21> 58,<22> 88,<23> 61,<24> 81,<25> 81,<26> 98,<27> 66,<28> 17,<29> 10,<30> 93,<31> 2,<32> 63,<33> 52,<34> 1,<35> 62,<36> 99,<37> 72,<38> 90,<39> 8,<40> 90;
#20,26,29,33,23,30,37,20,99,35,9,31,84,49,40,74,41,62,54,87,16,96,82,38,92,34,4,79,40,75,19,90,4,95,44,67,41,70,89,82 ;
param x[D]  := <1> 9,<2> 40,<3> 29,<4> 25,<5> 24,<6> 20,<7> 31,<8> 9,<9> 49,<10> 5 ;

var y[DN] binary;
var w[DN] integer;

minimize cost : sum <i,j> in DN : ( c[i,j] * w[i,j] + f[i,j] * y[i,j]);

subto capacity : forall <i> in N do sum <j> in D : w[j,i] <= b[i];

subto demand : forall <j> in D do sum <i> in N : w[j,i] == x[j];

subto constraint : forall <i,j> in DN : w[i,j] - b[i] * y[i,j] <= 0;
